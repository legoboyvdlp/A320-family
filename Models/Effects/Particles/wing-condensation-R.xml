<?xml version="1.0" encoding="UTF-8"?>

<PropertyList>
	<particlesystem>
		<name>wing-condensation</name>
		<texture>smoke.png</texture>
		<emissive>false</emissive>
		<lighting>false</lighting>
		<type>normal</type>
		<attach>local</attach>

		<condition>
			<and>
				<greater-than-equals>
					<expression>
						<sum>
							<product>
								<property>environment/relative-humidity</property>
								<value>0.075</value>
							</product>
							<property>fdm/jsbsim/aero/alpha-deg-fixed</property>
						</sum>
					</expression>
					<value>13.5</value>
				</greater-than-equals>
				<greater-than>
					<property>velocities/groundspeed-kt</property>
					<value>100</value>
				</greater-than>
				<less-than>
					<property>velocities/groundspeed-kt</property>
					<value>210</value>
				</less-than>
				<greater-than>
					<property>environment/relative-humidity</property>
					<value>50</value>
				</greater-than>
				<less-than-equals>
					<property>environment/temperature-degc</property>
					<value>28</value>
				</less-than-equals>
				<greater-than>
					<property>position/altitude-agl-ft</property>
					<value>0</value>
				</greater-than>
				<less-than>
					<property>position/altitude-agl-ft</property>
					<value>8000</value>
				</less-than>
				<greater-than>
					<property>fdm/jsbsim/aero/alpha-deg</property>
					<value>0</value>
				</greater-than>
			</and>
		</condition>

		<placer>
			<type>segments</type>
			<vertex>
				<x-m>-2.8</x-m>
				<y-m>2.3</y-m>
				<z-m>-0.8</z-m>
			</vertex>
			<vertex>
				<x-m>2.0</x-m>
				<y-m>16</y-m>
				<z-m>0.3</z-m>
			</vertex>
			<vertex>
				<x-m>-1.2</x-m>
				<y-m>8.7</y-m>
				<z-m>-0.3</z-m>
			</vertex>
		</placer>

		<shooter>
			<theta-min-deg>
				<!-- <expression>
					<sum>
					<value>70</value>
					<property>systems/navigation/adr/output/aoa-1</property>
				 </sum>
			  </expression> -->
				<value>90</value>
			</theta-min-deg>
			<theta-max-deg>
				<!-- <expression>
					<sum>
					<value>110</value>
					<property>systems/navigation/adr/output/aoa-1</property>
				 </sum>
			  </expression> -->
				<value>90</value>
			</theta-max-deg>
			<phi-min-deg>90</phi-min-deg>
			<phi-max-deg>90</phi-max-deg>
			<speed-mps>
				<!-- <expression>
				<product>
					<property>velocities/groundspeed-kt</property>
					<value>-1</value>
				</product>
				</expression> -->
				<value>0</value>
				<spread>0</spread>
			</speed-mps>
			<rotation-speed>
				<x-max-deg-sec>180</x-max-deg-sec>
				<x-min-deg-sec>180</x-min-deg-sec>
				<y-max-deg-sec>180</y-max-deg-sec>
				<y-min-deg-sec>-180</y-min-deg-sec>
				<z-max-deg-sec>-180</z-max-deg-sec>
				<z-min-deg-sec>-180</z-min-deg-sec>
			</rotation-speed>
		</shooter>

		<counter>
			<particles-per-sec>
				<expression>
					<product>
						<value>4</value>
						<property>environment/relative-humidity</property>
					</product>
				</expression>
				<spread>10</spread>
			</particles-per-sec>
		</counter>

		<align>billboard</align>

		<particle>
			<start>
				<color>
					<red>
						<expression>
							<product>
								<value>0.01</value>
								<property>rendering/scene/diffuse/red</property>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</red>
					<green>
						<expression>
							<product>
								<value>0.01</value>
								<property>rendering/scene/diffuse/red</property>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</green>
					<blue>
						<expression>
							<product>
								<value>0.01</value>
								<property>rendering/scene/diffuse/red</property>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</blue>
					<alpha>
						<expression>
							<product>
								<value>0.0007</value>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</alpha>
				</color>
				<size>
					<value>1.5</value>
				</size>
			</start>
			<end>
				<color>
					<red>
						<expression>
							<product>
								<value>0.01</value>
								<property>rendering/scene/diffuse/red</property>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</red>
					<green>
						<expression>
							<product>
								<value>0.01</value>
								<property>rendering/scene/diffuse/red</property>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</green>
					<blue>
						<expression>
							<product>
								<value>0.01</value>
								<property>rendering/scene/diffuse/red</property>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</blue>
					<alpha>
						<expression>
							<product>
								<value>0.00001</value>
								<property>environment/relative-humidity</property>
							</product>
						</expression>
					</alpha>
				</color>
				<size>
					<value>2</value>
				</size>
			</end>
			<life-sec>
				<value>0.00001</value>
			</life-sec>
			<mass-kg>0.025</mass-kg>
			<radius-m>0.175</radius-m>
		</particle>

		<program>
			<fluid>air</fluid>
			<gravity>true</gravity>
			<wind>true</wind>
		</program>

	</particlesystem>

</PropertyList>